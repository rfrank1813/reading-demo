<!DOCTYPE html>
<head>
  <title>Read a word</title>
  <script
  src="https://code.jquery.com/jquery-3.4.0.min.js"
  integrity="sha256-BJeo0qm959uMBGb65z40ejJYGSgR7REI4+CW1fNKwOg="
  crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.1.2/howler.js"></script>


  <style>

    body {
      font-family: georgia;
    }

    h1 {
      display: block;
      text-align: center;
      margin: 30px auto;
      font-size: 300px;
      margin-top: 100px;
      text-transform: uppercase
    }

  </style>

</head>


<BODY>


  <h1 id="word">
    <button onclick="ready()">Hit me!</button>
  </h1>
  <div style="clear: both"></div>





</BODY>




<script>

    var connection = new WebSocket('ws://'+location.hostname+':82'); 

    connection.onopen = function (e) { 
      console.log("connected "+e); 
    }; 

    connection.onerror = function (error) { 
      console.log('WebSocket Error ' + error); 
    }; 

    connection.onmessage = function (e) { 
      window.e = e; 
      console.log(e); 
      
      console.log("message received");
      let msg= e.data; 

      switch(msg) {
        case 'correct':
          var sound = new Howl({
            src: ["/positive.mp3"]
          });
          sound.play();
          break;
        case 'incorrect':
          var sound = new Howl({
            src: ["/wrong.mp3"]
          });
          sound.play();
          break;
        default:
          $("#word").html(msg);
      }
    }     
  </script> 

<script> 
  

  function ready() {
    $("#word").html("Waiting...");
  }

  // displayButtons function
  function setup() {

    // fetch the right data for the buttons
    // add a db entry for id 0 on start state
    // $.ajax({
    //   url: "/get_word",
    //   type: "GET",
    //   success: function(data) {

    //     window.data = data;

    //     if(data.length==0) {
    //       alert("No data!"); 
    //     } 

    //     $("#word").html(data.word);
    //   }
    // });

  }

  $(document).ready(function() {
    setup();
  });
</script>